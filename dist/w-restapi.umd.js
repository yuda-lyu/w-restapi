/*!
 * w-restapi v1.0.14
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("fs"),require("@hapi/hapi"),require("@hapi/inert"),require("json5")):"function"==typeof define&&define.amd?define(["fs","@hapi/hapi","@hapi/inert","json5"],n):(t="undefined"!=typeof globalThis?globalThis:t||self)["w-restapi"]=n(t.fs,t["@hapi/hapi"],t["@hapi/inert"],t.json5)}(this,(function(t,n,e,r){"use strict";function o(t,n){for(var e=-1,r=n.length,o=t.length;++e<r;)t[o+e]=n[e];return t}var i="object"==typeof global&&global&&global.Object===Object&&global,a="object"==typeof self&&self&&self.Object===Object&&self,u=i||a||Function("return this")(),c=u.Symbol,s=Object.prototype,l=s.hasOwnProperty,p=s.toString,f=c?c.toStringTag:void 0;var h=Object.prototype.toString;var d="[object Null]",y="[object Undefined]",v=c?c.toStringTag:void 0;function b(t){return null==t?void 0===t?y:d:v&&v in Object(t)?function(t){var n=l.call(t,f),e=t[f];try{t[f]=void 0;var r=!0}catch(t){}var o=p.call(t);return r&&(n?t[f]=e:delete t[f]),o}(t):function(t){return h.call(t)}(t)}function g(t){return null!=t&&"object"==typeof t}function m(t){return g(t)&&"[object Arguments]"==b(t)}var _=Object.prototype,j=_.hasOwnProperty,O=_.propertyIsEnumerable,w=m(function(){return arguments}())?m:function(t){return g(t)&&j.call(t,"callee")&&!O.call(t,"callee")},A=w,P=Array.isArray,S=c?c.isConcatSpreadable:void 0;function N(t){return P(t)||A(t)||!!(S&&t&&t[S])}function z(t,n,e,r,i){var a=-1,u=t.length;for(e||(e=N),i||(i=[]);++a<u;){var c=t[a];n>0&&e(c)?n>1?z(c,n-1,e,r,i):o(i,c):r||(i[i.length]=c)}return i}function k(t,n){for(var e=-1,r=null==t?0:t.length,o=Array(r);++e<r;)o[e]=n(t[e],e,t);return o}var T="[object Symbol]";function $(t){return"symbol"==typeof t||g(t)&&b(t)==T}var x=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,E=/^\w*$/;function q(t,n){if(P(t))return!1;var e=typeof t;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!$(t))||(E.test(t)||!x.test(t)||null!=n&&t in Object(n))}function F(t){var n=typeof t;return null!=t&&("object"==n||"function"==n)}var D="[object AsyncFunction]",G="[object Function]",I="[object GeneratorFunction]",V="[object Proxy]";function M(t){if(!F(t))return!1;var n=b(t);return n==G||n==I||n==D||n==V}var B,L=u["__core-js_shared__"],U=(B=/[^.]+$/.exec(L&&L.keys&&L.keys.IE_PROTO||""))?"Symbol(src)_1."+B:"";var C=Function.prototype.toString;function J(t){if(null!=t){try{return C.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var R=/^\[object .+?Constructor\]$/,W=Function.prototype,H=Object.prototype,K=W.toString,Q=H.hasOwnProperty,X=RegExp("^"+K.call(Q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Y(t){return!(!F(t)||(n=t,U&&U in n))&&(M(t)?X:R).test(J(t));var n}function Z(t,n){var e=function(t,n){return null==t?void 0:t[n]}(t,n);return Y(e)?e:void 0}var tt=Z(Object,"create");var nt=Object.prototype.hasOwnProperty;var et=Object.prototype.hasOwnProperty;function rt(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function ot(t,n){return t===n||t!=t&&n!=n}function it(t,n){for(var e=t.length;e--;)if(ot(t[e][0],n))return e;return-1}rt.prototype.clear=function(){this.__data__=tt?tt(null):{},this.size=0},rt.prototype.delete=function(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n},rt.prototype.get=function(t){var n=this.__data__;if(tt){var e=n[t];return"__lodash_hash_undefined__"===e?void 0:e}return nt.call(n,t)?n[t]:void 0},rt.prototype.has=function(t){var n=this.__data__;return tt?void 0!==n[t]:et.call(n,t)},rt.prototype.set=function(t,n){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=tt&&void 0===n?"__lodash_hash_undefined__":n,this};var at=Array.prototype.splice;function ut(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}ut.prototype.clear=function(){this.__data__=[],this.size=0},ut.prototype.delete=function(t){var n=this.__data__,e=it(n,t);return!(e<0)&&(e==n.length-1?n.pop():at.call(n,e,1),--this.size,!0)},ut.prototype.get=function(t){var n=this.__data__,e=it(n,t);return e<0?void 0:n[e][1]},ut.prototype.has=function(t){return it(this.__data__,t)>-1},ut.prototype.set=function(t,n){var e=this.__data__,r=it(e,t);return r<0?(++this.size,e.push([t,n])):e[r][1]=n,this};var ct=Z(u,"Map");function st(t,n){var e,r,o=t.__data__;return("string"==(r=typeof(e=n))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==e:null===e)?o["string"==typeof n?"string":"hash"]:o.map}function lt(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}lt.prototype.clear=function(){this.size=0,this.__data__={hash:new rt,map:new(ct||ut),string:new rt}},lt.prototype.delete=function(t){var n=st(this,t).delete(t);return this.size-=n?1:0,n},lt.prototype.get=function(t){return st(this,t).get(t)},lt.prototype.has=function(t){return st(this,t).has(t)},lt.prototype.set=function(t,n){var e=st(this,t),r=e.size;return e.set(t,n),this.size+=e.size==r?0:1,this};var pt="Expected a function";function ft(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw new TypeError(pt);var e=function(){var r=arguments,o=n?n.apply(this,r):r[0],i=e.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return e.cache=i.set(o,a)||i,a};return e.cache=new(ft.Cache||lt),e}ft.Cache=lt;var ht,dt,yt,vt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,bt=/\\(\\)?/g,gt=(ht=function(t){var n=[];return 46===t.charCodeAt(0)&&n.push(""),t.replace(vt,(function(t,e,r,o){n.push(r?o.replace(bt,"$1"):e||t)})),n},dt=ft(ht,(function(t){return 500===yt.size&&yt.clear(),t})),yt=dt.cache,dt),mt=gt,_t=1/0,jt=c?c.prototype:void 0,Ot=jt?jt.toString:void 0;function wt(t){if("string"==typeof t)return t;if(P(t))return k(t,wt)+"";if($(t))return Ot?Ot.call(t):"";var n=t+"";return"0"==n&&1/t==-_t?"-0":n}function At(t,n){return P(t)?t:q(t,n)?[t]:mt(function(t){return null==t?"":wt(t)}(t))}var Pt=1/0;function St(t){if("string"==typeof t||$(t))return t;var n=t+"";return"0"==n&&1/t==-Pt?"-0":n}function Nt(t,n){for(var e=0,r=(n=At(n,t)).length;null!=t&&e<r;)t=t[St(n[e++])];return e&&e==r?t:void 0}function zt(t){var n=this.__data__=new ut(t);this.size=n.size}zt.prototype.clear=function(){this.__data__=new ut,this.size=0},zt.prototype.delete=function(t){var n=this.__data__,e=n.delete(t);return this.size=n.size,e},zt.prototype.get=function(t){return this.__data__.get(t)},zt.prototype.has=function(t){return this.__data__.has(t)},zt.prototype.set=function(t,n){var e=this.__data__;if(e instanceof ut){var r=e.__data__;if(!ct||r.length<199)return r.push([t,n]),this.size=++e.size,this;e=this.__data__=new lt(r)}return e.set(t,n),this.size=e.size,this};function kt(t){var n=-1,e=null==t?0:t.length;for(this.__data__=new lt;++n<e;)this.add(t[n])}function Tt(t,n){for(var e=-1,r=null==t?0:t.length;++e<r;)if(n(t[e],e,t))return!0;return!1}function $t(t,n){return t.has(n)}kt.prototype.add=kt.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},kt.prototype.has=function(t){return this.__data__.has(t)};var xt=1,Et=2;function qt(t,n,e,r,o,i){var a=e&xt,u=t.length,c=n.length;if(u!=c&&!(a&&c>u))return!1;var s=i.get(t),l=i.get(n);if(s&&l)return s==n&&l==t;var p=-1,f=!0,h=e&Et?new kt:void 0;for(i.set(t,n),i.set(n,t);++p<u;){var d=t[p],y=n[p];if(r)var v=a?r(y,d,p,n,t,i):r(d,y,p,t,n,i);if(void 0!==v){if(v)continue;f=!1;break}if(h){if(!Tt(n,(function(t,n){if(!$t(h,n)&&(d===t||o(d,t,e,r,i)))return h.push(n)}))){f=!1;break}}else if(d!==y&&!o(d,y,e,r,i)){f=!1;break}}return i.delete(t),i.delete(n),f}var Ft=u.Uint8Array;function Dt(t){var n=-1,e=Array(t.size);return t.forEach((function(t,r){e[++n]=[r,t]})),e}function Gt(t){var n=-1,e=Array(t.size);return t.forEach((function(t){e[++n]=t})),e}var It=1,Vt=2,Mt="[object Boolean]",Bt="[object Date]",Lt="[object Error]",Ut="[object Map]",Ct="[object Number]",Jt="[object RegExp]",Rt="[object Set]",Wt="[object String]",Ht="[object Symbol]",Kt="[object ArrayBuffer]",Qt="[object DataView]",Xt=c?c.prototype:void 0,Yt=Xt?Xt.valueOf:void 0;var Zt=Object.prototype.propertyIsEnumerable,tn=Object.getOwnPropertySymbols,nn=tn?function(t){return null==t?[]:(t=Object(t),function(t,n){for(var e=-1,r=null==t?0:t.length,o=0,i=[];++e<r;){var a=t[e];n(a,e,t)&&(i[o++]=a)}return i}(tn(t),(function(n){return Zt.call(t,n)})))}:function(){return[]},en=nn;var rn="object"==typeof exports&&exports&&!exports.nodeType&&exports,on=rn&&"object"==typeof module&&module&&!module.nodeType&&module,an=on&&on.exports===rn?u.Buffer:void 0,un=(an?an.isBuffer:void 0)||function(){return!1},cn=9007199254740991,sn=/^(?:0|[1-9]\d*)$/;function ln(t,n){var e=typeof t;return!!(n=null==n?cn:n)&&("number"==e||"symbol"!=e&&sn.test(t))&&t>-1&&t%1==0&&t<n}var pn=9007199254740991;function fn(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=pn}var hn={};function dn(t){return function(n){return t(n)}}hn["[object Float32Array]"]=hn["[object Float64Array]"]=hn["[object Int8Array]"]=hn["[object Int16Array]"]=hn["[object Int32Array]"]=hn["[object Uint8Array]"]=hn["[object Uint8ClampedArray]"]=hn["[object Uint16Array]"]=hn["[object Uint32Array]"]=!0,hn["[object Arguments]"]=hn["[object Array]"]=hn["[object ArrayBuffer]"]=hn["[object Boolean]"]=hn["[object DataView]"]=hn["[object Date]"]=hn["[object Error]"]=hn["[object Function]"]=hn["[object Map]"]=hn["[object Number]"]=hn["[object Object]"]=hn["[object RegExp]"]=hn["[object Set]"]=hn["[object String]"]=hn["[object WeakMap]"]=!1;var yn="object"==typeof exports&&exports&&!exports.nodeType&&exports,vn=yn&&"object"==typeof module&&module&&!module.nodeType&&module,bn=vn&&vn.exports===yn&&i.process,gn=function(){try{var t=vn&&vn.require&&vn.require("util").types;return t||bn&&bn.binding&&bn.binding("util")}catch(t){}}(),mn=gn&&gn.isTypedArray,_n=mn?dn(mn):function(t){return g(t)&&fn(t.length)&&!!hn[b(t)]},jn=Object.prototype.hasOwnProperty;function On(t,n){var e=P(t),r=!e&&A(t),o=!e&&!r&&un(t),i=!e&&!r&&!o&&_n(t),a=e||r||o||i,u=a?function(t,n){for(var e=-1,r=Array(t);++e<t;)r[e]=n(e);return r}(t.length,String):[],c=u.length;for(var s in t)!n&&!jn.call(t,s)||a&&("length"==s||o&&("offset"==s||"parent"==s)||i&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||ln(s,c))||u.push(s);return u}var wn=Object.prototype;var An=function(t,n){return function(e){return t(n(e))}}(Object.keys,Object),Pn=An,Sn=Object.prototype.hasOwnProperty;function Nn(t){if(e=(n=t)&&n.constructor,n!==("function"==typeof e&&e.prototype||wn))return Pn(t);var n,e,r=[];for(var o in Object(t))Sn.call(t,o)&&"constructor"!=o&&r.push(o);return r}function zn(t){return null!=t&&fn(t.length)&&!M(t)}function kn(t){return zn(t)?On(t):Nn(t)}function Tn(t){return function(t,n,e){var r=n(t);return P(t)?r:o(r,e(t))}(t,kn,en)}var $n=1,xn=Object.prototype.hasOwnProperty;var En=Z(u,"DataView"),qn=Z(u,"Promise"),Fn=Z(u,"Set"),Dn=Z(u,"WeakMap"),Gn="[object Map]",In="[object Promise]",Vn="[object Set]",Mn="[object WeakMap]",Bn="[object DataView]",Ln=J(En),Un=J(ct),Cn=J(qn),Jn=J(Fn),Rn=J(Dn),Wn=b;(En&&Wn(new En(new ArrayBuffer(1)))!=Bn||ct&&Wn(new ct)!=Gn||qn&&Wn(qn.resolve())!=In||Fn&&Wn(new Fn)!=Vn||Dn&&Wn(new Dn)!=Mn)&&(Wn=function(t){var n=b(t),e="[object Object]"==n?t.constructor:void 0,r=e?J(e):"";if(r)switch(r){case Ln:return Bn;case Un:return Gn;case Cn:return In;case Jn:return Vn;case Rn:return Mn}return n});var Hn=Wn,Kn=1,Qn="[object Arguments]",Xn="[object Array]",Yn="[object Object]",Zn=Object.prototype.hasOwnProperty;function te(t,n,e,r,o,i){var a=P(t),u=P(n),c=a?Xn:Hn(t),s=u?Xn:Hn(n),l=(c=c==Qn?Yn:c)==Yn,p=(s=s==Qn?Yn:s)==Yn,f=c==s;if(f&&un(t)){if(!un(n))return!1;a=!0,l=!1}if(f&&!l)return i||(i=new zt),a||_n(t)?qt(t,n,e,r,o,i):function(t,n,e,r,o,i,a){switch(e){case Qt:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case Kt:return!(t.byteLength!=n.byteLength||!i(new Ft(t),new Ft(n)));case Mt:case Bt:case Ct:return ot(+t,+n);case Lt:return t.name==n.name&&t.message==n.message;case Jt:case Wt:return t==n+"";case Ut:var u=Dt;case Rt:var c=r&It;if(u||(u=Gt),t.size!=n.size&&!c)return!1;var s=a.get(t);if(s)return s==n;r|=Vt,a.set(t,n);var l=qt(u(t),u(n),r,o,i,a);return a.delete(t),l;case Ht:if(Yt)return Yt.call(t)==Yt.call(n)}return!1}(t,n,c,e,r,o,i);if(!(e&Kn)){var h=l&&Zn.call(t,"__wrapped__"),d=p&&Zn.call(n,"__wrapped__");if(h||d){var y=h?t.value():t,v=d?n.value():n;return i||(i=new zt),o(y,v,e,r,i)}}return!!f&&(i||(i=new zt),function(t,n,e,r,o,i){var a=e&$n,u=Tn(t),c=u.length;if(c!=Tn(n).length&&!a)return!1;for(var s=c;s--;){var l=u[s];if(!(a?l in n:xn.call(n,l)))return!1}var p=i.get(t),f=i.get(n);if(p&&f)return p==n&&f==t;var h=!0;i.set(t,n),i.set(n,t);for(var d=a;++s<c;){var y=t[l=u[s]],v=n[l];if(r)var b=a?r(v,y,l,n,t,i):r(y,v,l,t,n,i);if(!(void 0===b?y===v||o(y,v,e,r,i):b)){h=!1;break}d||(d="constructor"==l)}if(h&&!d){var g=t.constructor,m=n.constructor;g==m||!("constructor"in t)||!("constructor"in n)||"function"==typeof g&&g instanceof g&&"function"==typeof m&&m instanceof m||(h=!1)}return i.delete(t),i.delete(n),h}(t,n,e,r,o,i))}function ne(t,n,e,r,o){return t===n||(null==t||null==n||!g(t)&&!g(n)?t!=t&&n!=n:te(t,n,e,r,ne,o))}var ee=1,re=2;function oe(t){return t==t&&!F(t)}function ie(t,n){return function(e){return null!=e&&(e[t]===n&&(void 0!==n||t in Object(e)))}}function ae(t){var n=function(t){for(var n=kn(t),e=n.length;e--;){var r=n[e],o=t[r];n[e]=[r,o,oe(o)]}return n}(t);return 1==n.length&&n[0][2]?ie(n[0][0],n[0][1]):function(e){return e===t||function(t,n,e,r){var o=e.length,i=o,a=!r;if(null==t)return!i;for(t=Object(t);o--;){var u=e[o];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<i;){var c=(u=e[o])[0],s=t[c],l=u[1];if(a&&u[2]){if(void 0===s&&!(c in t))return!1}else{var p=new zt;if(r)var f=r(s,l,c,t,n,p);if(!(void 0===f?ne(l,s,ee|re,r,p):f))return!1}}return!0}(e,t,n)}}function ue(t,n){return null!=t&&n in Object(t)}function ce(t,n){return null!=t&&function(t,n,e){for(var r=-1,o=(n=At(n,t)).length,i=!1;++r<o;){var a=St(n[r]);if(!(i=null!=t&&e(t,a)))break;t=t[a]}return i||++r!=o?i:!!(o=null==t?0:t.length)&&fn(o)&&ln(a,o)&&(P(t)||A(t))}(t,n,ue)}var se=1,le=2;function pe(t,n){return q(t)&&oe(n)?ie(St(t),n):function(e){var r=function(t,n,e){var r=null==t?void 0:Nt(t,n);return void 0===r?e:r}(e,t);return void 0===r&&r===n?ce(e,t):ne(n,r,se|le)}}function fe(t){return t}function he(t){return q(t)?(n=St(t),function(t){return null==t?void 0:t[n]}):function(t){return function(n){return Nt(n,t)}}(t);var n}function de(t){return"function"==typeof t?t:null==t?fe:"object"==typeof t?P(t)?pe(t[0],t[1]):ae(t):he(t)}var ye,ve=function(t,n,e){for(var r=-1,o=Object(t),i=e(t),a=i.length;a--;){var u=i[ye?a:++r];if(!1===n(o[u],u,o))break}return t};var be=function(t,n){return function(e,r){if(null==e)return e;if(!zn(e))return t(e,r);for(var o=e.length,i=n?o:-1,a=Object(e);(n?i--:++i<o)&&!1!==r(a[i],i,a););return e}}((function(t,n){return t&&ve(t,n,kn)})),ge=be;function me(t,n){var e=-1,r=zn(t)?Array(t.length):[];return ge(t,(function(t,o,i){r[++e]=n(t,o,i)})),r}function _e(t,n){if(t!==n){var e=void 0!==t,r=null===t,o=t==t,i=$(t),a=void 0!==n,u=null===n,c=n==n,s=$(n);if(!u&&!s&&!i&&t>n||i&&a&&c&&!u&&!s||r&&a&&c||!e&&c||!o)return 1;if(!r&&!i&&!s&&t<n||s&&e&&o&&!r&&!i||u&&e&&o||!a&&o||!c)return-1}return 0}function je(t,n,e){n=n.length?k(n,(function(t){return P(t)?function(n){return Nt(n,1===t.length?t[0]:t)}:t})):[fe];var r=-1;return n=k(n,dn(de)),function(t,n){var e=t.length;for(t.sort(n);e--;)t[e]=t[e].value;return t}(me(t,(function(t,e,o){return{criteria:k(n,(function(n){return n(t)})),index:++r,value:t}})),(function(t,n){return function(t,n,e){for(var r=-1,o=t.criteria,i=n.criteria,a=o.length,u=e.length;++r<a;){var c=_e(o[r],i[r]);if(c)return r>=u?c:c*("desc"==e[r]?-1:1)}return t.index-n.index}(t,n,e)}))}var Oe=Math.max;var we=function(){try{var t=Z(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Ae=we,Pe=Ae?function(t,n){return Ae(t,"toString",{configurable:!0,enumerable:!1,value:(e=n,function(){return e}),writable:!0});var e}:fe,Se=Pe,Ne=Date.now;var ze=function(t){var n=0,e=0;return function(){var r=Ne(),o=16-(r-e);if(e=r,o>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}(Se),ke=ze;function Te(t,n,e){if(!F(e))return!1;var r=typeof n;return!!("number"==r?zn(e)&&ln(n,e.length):"string"==r&&n in e)&&ot(e[n],t)}var $e=function(t,n){return ke(function(t,n,e){return n=Oe(void 0===n?t.length-1:n,0),function(){for(var r=arguments,o=-1,i=Oe(r.length-n,0),a=Array(i);++o<i;)a[o]=r[n+o];o=-1;for(var u=Array(n+1);++o<n;)u[o]=r[o];return u[n]=e(a),function(t,n,e){switch(e.length){case 0:return t.call(n);case 1:return t.call(n,e[0]);case 2:return t.call(n,e[0],e[1]);case 3:return t.call(n,e[0],e[1],e[2])}return t.apply(n,e)}(t,this,u)}}(t,n,fe),t+"")}((function(t,n){if(null==t)return[];var e=n.length;return e>1&&Te(t,n[0],n[1])?n=[]:e>2&&Te(n[0],n[1],n[2])&&(n=[n[0]]),je(t,z(n,1),[])})),xe=$e;function Ee(t,n){return(P(t)?k:me)(t,de(n))}var qe=Array.prototype.join;function Fe(t,n){return null==t?"":qe.call(t,n)}function De(t){return"[object String]"===Object.prototype.toString.call(t)}function Ge(t){return!(!De(t)||""===t)}function Ie(t,n,e){if(!Ge(t))return"";if(!Ge(n))return"";if(!De(e))return"";return String(t).replaceAll(n,e)}let Ve="\n'get': {\n    'tags': [\n        '{tag}'\n    ],\n    'summary': 'select {tag} by {col}',\n    'description': 'select {tag} by {col}',\n    'parameters': [\n        {\n            'in': 'query',\n            'name': 'token',\n            'type': 'string',\n            'default': '{token}'\n        },\n        {\n            'name': '{col}',\n            'in': 'path',\n            'description': '{colDescription}',\n            'required': true,\n            'type': '{colType}',\n        }\n    ],\n    'responses': {\n        '200': {\n            'description': 'success'\n        },\n        'default': {\n            'description': 'error'\n        }\n    }\n},\n",Me="\n'post': {\n    'tags': [\n        '{tag}'\n    ],\n    'summary': 'add or modify {tag} by {col}',\n    'description': 'add or modify {tag} by {col}',\n    'consumes': [\n        'application/json',\n    ],\n    'parameters': [\n        {\n            'in': 'query',\n            'name': 'token',\n            'type': 'string',\n            'default': '{token}'\n        },\n        {\n            'name': '{col}',\n            'in': 'path',\n            'description': '{colDescription}',\n            'required': true,\n            'type': '{colType}',\n        },\n        {\n            'name': 'body',\n            'in': 'body',\n            'description': '{tag} object in JSON string format',\n            'required': true,\n            'schema': {\n                'type': 'string',\n                'properties': {props}\n            }\n        }\n    ],\n    'responses': {\n        '200': {\n            'description': 'success'\n        },\n        'default': {\n            'description': 'error'\n        }\n    }\n},\n",Be=Me.replace("'post':","'put':"),Le="\n'delete': {\n    'tags': [\n        '{tag}'\n    ],\n    'summary': 'delete {tag} by {col}',\n    'description': 'delete {tag} by {col}',\n    'parameters': [\n        {\n            'in': 'query',\n            'name': 'token',\n            'type': 'string',\n            'default': '{token}'\n        },\n        {\n            'name': '{col}',\n            'in': 'path',\n            'description': '{colDescription}',\n            'required': true,\n            'type': '{colType}',\n        }\n    ],\n    'responses': {\n        '200': {\n            'description': 'success'\n        },\n        'default': {\n            'description': 'error'\n        }\n    }\n},\n",Ue="\n'get': {\n    'tags': [\n        '{tag}'\n    ],\n    'summary': 'select all {tag}(s)',\n    'description': 'select all {tag}(s)',\n    'parameters': [\n        {\n            'in': 'query',\n            'name': 'token',\n            'type': 'string',\n            'default': '{token}'\n        }\n    ],\n    'security': [],\n    'responses': {\n        '200': {\n            'description': 'success'\n        },\n        'default': {\n            'description': 'error'\n        }\n    }\n},\n",Ce="\n'post': {\n    'tags': [\n        '{tag}'\n    ],\n    'summary': 'add or modify one or multiple {tag}(s)',\n    'description': 'add or modify one or multiple {tag}(s)',\n    'consumes': [\n        'application/json',\n    ],\n    'parameters': [\n        {\n            'in': 'query',\n            'name': 'token',\n            'type': 'string',\n            'default': '{token}'\n        },\n        {\n            'name': 'body',\n            'in': 'body',\n            'description': '{tag} object or array of objects in JSON string format',\n            'required': true,\n            'schema': {\n                'type': 'string',\n                'properties': {props}\n            }\n        }\n    ],\n    'responses': {\n        '200': {\n            'description': 'success'\n        },\n        'default': {\n            'description': 'error'\n        }\n    }\n},\n",Je=Ce.replace("'post':","'put':"),Re="\n'/{tag}': {\n    {itemsGet}\n    {itemsPost}\n    {itemsPut}\n},\n",We="\n'/{tag}/{col}/{{col}}': {\n    {itemGet}\n    {itemPost}\n    {itemPut}\n    {itemDelete}\n},\n",He="\n{\n    'swagger': '2.0',\n    'info': {\n        'description': 'Server API(s) is generated by hapi.',\n        'version': '1.0.0',\n        'title': 'API Documents'\n    },\n    'host': '{host}',\n    'basePath': '/{basePath}',\n    'schemes': [\n        'http'\n    ],\n    'paths': {\n        {paths}\n    },\n}\n";function Ke(t){return Fe(Ee(t,((t,n)=>function(t,n,e){let r=We;return r=Ie(r,"{itemGet}",Ve),r=Ie(r,"{itemPost}",Me),r=Ie(r,"{itemPut}",Be),r=Ie(r,"{itemDelete}",Le),r=Ie(r,"{col}",t),r=Ie(r,"{colDescription}",n),r=Ie(r,"{colType}",e),r}(n,t.description,t.type))),"")}function Qe(t,n){let e="";return e+=function(){let t=Re;return t=Ie(t,"{itemsGet}",Ue),t=Ie(t,"{itemsPost}",Ce),t=Ie(t,"{itemsPut}",Je),t}(),e+=Ke(n),e=Ie(e,"{tag}",t),e=Ie(e,"{props}",JSON.stringify(n)),e}function Xe(t,n,e,o){let i=function(t){return Fe(Ee(t,(t=>Qe(t.apiName,t.props))),"")}(e),a=He;return a=Ie(a,"{host}",t),a=Ie(a,"{basePath}",n),a=Ie(a,"{paths}",i),a=Ie(a,"{token}",o),r.parse(a)}function Ye(t,n){for(var e=-1,r=null==t?0:t.length;++e<r&&!1!==n(t[e],e,t););return t}function Ze(t,n){var e;return(P(t)?Ye:ge)(t,"function"==typeof(e=n)?e:fe)}function tr(){let t,n,e=new Promise((function(){t=arguments[0],n=arguments[1]}));return e.resolve=t,e.reject=n,e}function nr(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{},r=[],o="/";return De(n)&&(o=`/${n}/`),Ze(t,(t=>{let n;n={path:o+t.apiName,method:"GET",handler:function(n,r){let o=tr();return e({method:"GET",apiName:t.apiName,propName:null,propValue:null,payload:null,req:n,res:r,pm:o}),o}},r.push(n),Ze(t.props,((i,a)=>{n={path:o+t.apiName+`/${a}/{${a}}`,method:"GET",handler:function(n,r){let o=tr(),i=n.params;return e({method:"GET",apiName:t.apiName,propName:a,propValue:i[a],payload:null,req:n,res:r,pm:o}),o}},r.push(n)})),Ze(["POST","PUT"],(i=>{n={path:o+t.apiName,method:i,handler:function(n,r){let o=tr(),a=n.payload;return e({method:i,apiName:t.apiName,propName:null,propValue:null,payload:a,req:n,res:r,pm:o}),o}},r.push(n),Ze(t.props,((a,u)=>{n={path:o+t.apiName+`/${u}/{${u}}`,method:i,handler:function(n,r){let o=tr(),a=n.params,c=n.payload;return e({method:i,apiName:t.apiName,propName:u,propValue:a[u],payload:c,req:n,res:r,pm:o}),o}},r.push(n)}))})),Ze(t.props,((i,a)=>{n={path:o+t.apiName+`/${a}/{${a}}`,method:"DELETE",handler:function(n,r){let o=tr(),i=n.params;return e({method:"DELETE",apiName:t.apiName,propName:a,propValue:i[a],payload:null,req:n,res:r,pm:o}),o}},r.push(n)}))})),r}return function(r){r.port||(r.port=8080),r.docFolder||(r.docFolder="swdoc"),r.apiParent||(r.apiParent="api"),r.routes||(r.routes=[]),function(t){let n=Object.prototype.toString.call(t);return"[object Function]"===n||"[object AsyncFunction]"===n}(r.proc)||(r.proc=()=>{});let o={method:"GET",path:`/${r.docFolder}/{file*}`,handler:{directory:{path:`${r.docFolder}/`}}},i=[];i.push(o),r.routes=xe(r.routes,"apiName"),i=[...i,...nr(r.routes,r.apiParent,r.proc)];let a=function(){return Xe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"localhost:8080",arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api",arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:"")}(`localhost:${r.port}`,r.apiParent,r.routes,r.token);t.writeFileSync(`./${r.docFolder}/swagger.json`,JSON.stringify(a,null,4),"utf8"),r.serverHapi?r.serverHapi.route(i):async function(){let t=n.server({port:r.port,routes:{cors:!0}});await t.register(e),t.route(i),t.start(),console.log(`Server running at: ${t.info.uri}`),console.log(`Server for API Documents running at: ${t.info.uri}/${r.docFolder}/index.html`)}()}}));
//# sourceMappingURL=w-restapi.umd.js.map
