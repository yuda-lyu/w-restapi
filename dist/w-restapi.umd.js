/*!
 * w-restapi v1.0.13
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("fs"),require("@hapi/hapi"),require("@hapi/inert"),require("json5")):"function"==typeof define&&define.amd?define(["fs","@hapi/hapi","@hapi/inert","json5"],n):(t="undefined"!=typeof globalThis?globalThis:t||self)["w-restapi"]=n(t.fs,t["@hapi/hapi"],t["@hapi/inert"],t.json5)}(this,(function(t,n,r,e){"use strict";var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function a(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var i=function(t,n){for(var r=-1,e=n.length,o=t.length;++r<e;)t[o+r]=n[r];return t},u="object"==typeof o&&o&&o.Object===Object&&o,c=u,s="object"==typeof self&&self&&self.Object===Object&&self,l=c||s||Function("return this")(),f=l.Symbol,p=f,v=Object.prototype,h=v.hasOwnProperty,d=v.toString,y=p?p.toStringTag:void 0;var g=function(t){var n=h.call(t,y),r=t[y];try{t[y]=void 0;var e=!0}catch(t){}var o=d.call(t);return e&&(n?t[y]=r:delete t[y]),o},b=Object.prototype.toString;var m=g,_=function(t){return b.call(t)},j=f?f.toStringTag:void 0;var O=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":j&&j in Object(t)?m(t):_(t)};var w=function(t){return null!=t&&"object"==typeof t},P=O,A=w;var S=function(t){return A(t)&&"[object Arguments]"==P(t)},N=w,T=Object.prototype,x=T.hasOwnProperty,z=T.propertyIsEnumerable,k=S(function(){return arguments}())?S:function(t){return N(t)&&x.call(t,"callee")&&!z.call(t,"callee")},E=k,$=Array.isArray,q=E,F=$,D=f?f.isConcatSpreadable:void 0;var I=i,G=function(t){return F(t)||q(t)||!!(D&&t&&t[D])};var M=function t(n,r,e,o,a){var i=-1,u=n.length;for(e||(e=G),a||(a=[]);++i<u;){var c=n[i];r>0&&e(c)?r>1?t(c,r-1,e,o,a):I(a,c):o||(a[a.length]=c)}return a};var V=function(t,n){for(var r=-1,e=null==t?0:t.length,o=Array(e);++r<e;)o[r]=n(t[r],r,t);return o},B=O,L=w;var U=function(t){return"symbol"==typeof t||L(t)&&"[object Symbol]"==B(t)},C=$,R=U,J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,W=/^\w*$/;var H=function(t,n){if(C(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!R(t))||(W.test(t)||!J.test(t)||null!=n&&t in Object(n))};var K=function(t){var n=typeof t;return null!=t&&("object"==n||"function"==n)},Q=O,X=K;var Y,Z=function(t){if(!X(t))return!1;var n=Q(t);return"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n},tt=l["__core-js_shared__"],nt=(Y=/[^.]+$/.exec(tt&&tt.keys&&tt.keys.IE_PROTO||""))?"Symbol(src)_1."+Y:"";var rt=function(t){return!!nt&&nt in t},et=Function.prototype.toString;var ot=function(t){if(null!=t){try{return et.call(t)}catch(t){}try{return t+""}catch(t){}}return""},at=Z,it=rt,ut=K,ct=ot,st=/^\[object .+?Constructor\]$/,lt=Function.prototype,ft=Object.prototype,pt=lt.toString,vt=ft.hasOwnProperty,ht=RegExp("^"+pt.call(vt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var dt=function(t){return!(!ut(t)||it(t))&&(at(t)?ht:st).test(ct(t))},yt=function(t,n){return null==t?void 0:t[n]};var gt=function(t,n){var r=yt(t,n);return dt(r)?r:void 0},bt=gt(Object,"create"),mt=bt;var _t=function(){this.__data__=mt?mt(null):{},this.size=0};var jt=function(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n},Ot=bt,wt=Object.prototype.hasOwnProperty;var Pt=function(t){var n=this.__data__;if(Ot){var r=n[t];return"__lodash_hash_undefined__"===r?void 0:r}return wt.call(n,t)?n[t]:void 0},At=bt,St=Object.prototype.hasOwnProperty;var Nt=bt;var Tt=_t,xt=jt,zt=Pt,kt=function(t){var n=this.__data__;return At?void 0!==n[t]:St.call(n,t)},Et=function(t,n){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Nt&&void 0===n?"__lodash_hash_undefined__":n,this};function $t(t){var n=-1,r=null==t?0:t.length;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}$t.prototype.clear=Tt,$t.prototype.delete=xt,$t.prototype.get=zt,$t.prototype.has=kt,$t.prototype.set=Et;var qt=$t;var Ft=function(){this.__data__=[],this.size=0};var Dt=function(t,n){return t===n||t!=t&&n!=n},It=Dt;var Gt=function(t,n){for(var r=t.length;r--;)if(It(t[r][0],n))return r;return-1},Mt=Gt,Vt=Array.prototype.splice;var Bt=Gt;var Lt=Gt;var Ut=Gt;var Ct=Ft,Rt=function(t){var n=this.__data__,r=Mt(n,t);return!(r<0)&&(r==n.length-1?n.pop():Vt.call(n,r,1),--this.size,!0)},Jt=function(t){var n=this.__data__,r=Bt(n,t);return r<0?void 0:n[r][1]},Wt=function(t){return Lt(this.__data__,t)>-1},Ht=function(t,n){var r=this.__data__,e=Ut(r,t);return e<0?(++this.size,r.push([t,n])):r[e][1]=n,this};function Kt(t){var n=-1,r=null==t?0:t.length;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}Kt.prototype.clear=Ct,Kt.prototype.delete=Rt,Kt.prototype.get=Jt,Kt.prototype.has=Wt,Kt.prototype.set=Ht;var Qt=Kt,Xt=gt(l,"Map"),Yt=qt,Zt=Qt,tn=Xt;var nn=function(t){var n=typeof t;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t};var rn=function(t,n){var r=t.__data__;return nn(n)?r["string"==typeof n?"string":"hash"]:r.map},en=rn;var on=rn;var an=rn;var un=rn;var cn=function(){this.size=0,this.__data__={hash:new Yt,map:new(tn||Zt),string:new Yt}},sn=function(t){var n=en(this,t).delete(t);return this.size-=n?1:0,n},ln=function(t){return on(this,t).get(t)},fn=function(t){return an(this,t).has(t)},pn=function(t,n){var r=un(this,t),e=r.size;return r.set(t,n),this.size+=r.size==e?0:1,this};function vn(t){var n=-1,r=null==t?0:t.length;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}vn.prototype.clear=cn,vn.prototype.delete=sn,vn.prototype.get=ln,vn.prototype.has=fn,vn.prototype.set=pn;var hn=vn,dn=hn;function yn(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw new TypeError("Expected a function");var r=function(){var e=arguments,o=n?n.apply(this,e):e[0],a=r.cache;if(a.has(o))return a.get(o);var i=t.apply(this,e);return r.cache=a.set(o,i)||a,i};return r.cache=new(yn.Cache||dn),r}yn.Cache=dn;var gn=yn;var bn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,mn=/\\(\\)?/g,_n=function(t){var n=gn(t,(function(t){return 500===r.size&&r.clear(),t})),r=n.cache;return n}((function(t){var n=[];return 46===t.charCodeAt(0)&&n.push(""),t.replace(bn,(function(t,r,e,o){n.push(e?o.replace(mn,"$1"):r||t)})),n})),jn=V,On=$,wn=U,Pn=f?f.prototype:void 0,An=Pn?Pn.toString:void 0;var Sn=function t(n){if("string"==typeof n)return n;if(On(n))return jn(n,t)+"";if(wn(n))return An?An.call(n):"";var r=n+"";return"0"==r&&1/n==-Infinity?"-0":r},Nn=Sn;var Tn=$,xn=H,zn=_n,kn=function(t){return null==t?"":Nn(t)};var En=function(t,n){return Tn(t)?t:xn(t,n)?[t]:zn(kn(t))},$n=U;var qn=function(t){if("string"==typeof t||$n(t))return t;var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n},Fn=En,Dn=qn;var In=function(t,n){for(var r=0,e=(n=Fn(n,t)).length;null!=t&&r<e;)t=t[Dn(n[r++])];return r&&r==e?t:void 0},Gn=Qt;var Mn=Qt,Vn=Xt,Bn=hn;var Ln=Qt,Un=function(){this.__data__=new Gn,this.size=0},Cn=function(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r},Rn=function(t){return this.__data__.get(t)},Jn=function(t){return this.__data__.has(t)},Wn=function(t,n){var r=this.__data__;if(r instanceof Mn){var e=r.__data__;if(!Vn||e.length<199)return e.push([t,n]),this.size=++r.size,this;r=this.__data__=new Bn(e)}return r.set(t,n),this.size=r.size,this};function Hn(t){var n=this.__data__=new Ln(t);this.size=n.size}Hn.prototype.clear=Un,Hn.prototype.delete=Cn,Hn.prototype.get=Rn,Hn.prototype.has=Jn,Hn.prototype.set=Wn;var Kn=Hn;var Qn=hn,Xn=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Yn=function(t){return this.__data__.has(t)};function Zn(t){var n=-1,r=null==t?0:t.length;for(this.__data__=new Qn;++n<r;)this.add(t[n])}Zn.prototype.add=Zn.prototype.push=Xn,Zn.prototype.has=Yn;var tr=Zn,nr=function(t,n){for(var r=-1,e=null==t?0:t.length;++r<e;)if(n(t[r],r,t))return!0;return!1},rr=function(t,n){return t.has(n)};var er=function(t,n,r,e,o,a){var i=1&r,u=t.length,c=n.length;if(u!=c&&!(i&&c>u))return!1;var s=a.get(t),l=a.get(n);if(s&&l)return s==n&&l==t;var f=-1,p=!0,v=2&r?new tr:void 0;for(a.set(t,n),a.set(n,t);++f<u;){var h=t[f],d=n[f];if(e)var y=i?e(d,h,f,n,t,a):e(h,d,f,t,n,a);if(void 0!==y){if(y)continue;p=!1;break}if(v){if(!nr(n,(function(t,n){if(!rr(v,n)&&(h===t||o(h,t,r,e,a)))return v.push(n)}))){p=!1;break}}else if(h!==d&&!o(h,d,r,e,a)){p=!1;break}}return a.delete(t),a.delete(n),p};var or=function(t){var n=-1,r=Array(t.size);return t.forEach((function(t,e){r[++n]=[e,t]})),r};var ar=l.Uint8Array,ir=Dt,ur=er,cr=or,sr=function(t){var n=-1,r=Array(t.size);return t.forEach((function(t){r[++n]=t})),r},lr=f?f.prototype:void 0,fr=lr?lr.valueOf:void 0;var pr=function(t,n,r,e,o,a,i){switch(r){case"[object DataView]":if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=n.byteLength||!a(new ar(t),new ar(n)));case"[object Boolean]":case"[object Date]":case"[object Number]":return ir(+t,+n);case"[object Error]":return t.name==n.name&&t.message==n.message;case"[object RegExp]":case"[object String]":return t==n+"";case"[object Map]":var u=cr;case"[object Set]":var c=1&e;if(u||(u=sr),t.size!=n.size&&!c)return!1;var s=i.get(t);if(s)return s==n;e|=2,i.set(t,n);var l=ur(u(t),u(n),e,o,a,i);return i.delete(t),l;case"[object Symbol]":if(fr)return fr.call(t)==fr.call(n)}return!1},vr=i,hr=$;var dr=function(t,n,r){var e=n(t);return hr(t)?e:vr(e,r(t))};var yr=function(t,n){for(var r=-1,e=null==t?0:t.length,o=0,a=[];++r<e;){var i=t[r];n(i,r,t)&&(a[o++]=i)}return a},gr=function(){return[]},br=Object.prototype.propertyIsEnumerable,mr=Object.getOwnPropertySymbols,_r=mr?function(t){return null==t?[]:(t=Object(t),yr(mr(t),(function(n){return br.call(t,n)})))}:gr;var jr=function(t,n){for(var r=-1,e=Array(t);++r<t;)e[r]=n(r);return e},Or={};var wr=function(){return!1};!function(t,n){var r=l,e=wr,o=n&&!n.nodeType&&n,a=o&&t&&!t.nodeType&&t,i=a&&a.exports===o?r.Buffer:void 0,u=(i?i.isBuffer:void 0)||e;t.exports=u}({get exports(){return Or},set exports(t){Or=t}},Or);var Pr=/^(?:0|[1-9]\d*)$/;var Ar=function(t,n){var r=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&Pr.test(t))&&t>-1&&t%1==0&&t<n};var Sr=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},Nr=O,Tr=Sr,xr=w,zr={};zr["[object Float32Array]"]=zr["[object Float64Array]"]=zr["[object Int8Array]"]=zr["[object Int16Array]"]=zr["[object Int32Array]"]=zr["[object Uint8Array]"]=zr["[object Uint8ClampedArray]"]=zr["[object Uint16Array]"]=zr["[object Uint32Array]"]=!0,zr["[object Arguments]"]=zr["[object Array]"]=zr["[object ArrayBuffer]"]=zr["[object Boolean]"]=zr["[object DataView]"]=zr["[object Date]"]=zr["[object Error]"]=zr["[object Function]"]=zr["[object Map]"]=zr["[object Number]"]=zr["[object Object]"]=zr["[object RegExp]"]=zr["[object Set]"]=zr["[object String]"]=zr["[object WeakMap]"]=!1;var kr=function(t){return xr(t)&&Tr(t.length)&&!!zr[Nr(t)]};var Er=function(t){return function(n){return t(n)}},$r={};!function(t,n){var r=u,e=n&&!n.nodeType&&n,o=e&&t&&!t.nodeType&&t,a=o&&o.exports===e&&r.process,i=function(){try{var t=o&&o.require&&o.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=i}({get exports(){return $r},set exports(t){$r=t}},$r);var qr=kr,Fr=Er,Dr=$r&&$r.isTypedArray,Ir=Dr?Fr(Dr):qr,Gr=jr,Mr=E,Vr=$,Br=Or,Lr=Ar,Ur=Ir,Cr=Object.prototype.hasOwnProperty;var Rr=function(t,n){var r=Vr(t),e=!r&&Mr(t),o=!r&&!e&&Br(t),a=!r&&!e&&!o&&Ur(t),i=r||e||o||a,u=i?Gr(t.length,String):[],c=u.length;for(var s in t)!n&&!Cr.call(t,s)||i&&("length"==s||o&&("offset"==s||"parent"==s)||a&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||Lr(s,c))||u.push(s);return u},Jr=Object.prototype;var Wr=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||Jr)};var Hr=function(t,n){return function(r){return t(n(r))}}(Object.keys,Object),Kr=Wr,Qr=Hr,Xr=Object.prototype.hasOwnProperty;var Yr=Z,Zr=Sr;var te=function(t){return null!=t&&Zr(t.length)&&!Yr(t)},ne=Rr,re=function(t){if(!Kr(t))return Qr(t);var n=[];for(var r in Object(t))Xr.call(t,r)&&"constructor"!=r&&n.push(r);return n},ee=te;var oe=function(t){return ee(t)?ne(t):re(t)},ae=dr,ie=_r,ue=oe;var ce=function(t){return ae(t,ue,ie)},se=Object.prototype.hasOwnProperty;var le=function(t,n,r,e,o,a){var i=1&r,u=ce(t),c=u.length;if(c!=ce(n).length&&!i)return!1;for(var s=c;s--;){var l=u[s];if(!(i?l in n:se.call(n,l)))return!1}var f=a.get(t),p=a.get(n);if(f&&p)return f==n&&p==t;var v=!0;a.set(t,n),a.set(n,t);for(var h=i;++s<c;){var d=t[l=u[s]],y=n[l];if(e)var g=i?e(y,d,l,n,t,a):e(d,y,l,t,n,a);if(!(void 0===g?d===y||o(d,y,r,e,a):g)){v=!1;break}h||(h="constructor"==l)}if(v&&!h){var b=t.constructor,m=n.constructor;b==m||!("constructor"in t)||!("constructor"in n)||"function"==typeof b&&b instanceof b&&"function"==typeof m&&m instanceof m||(v=!1)}return a.delete(t),a.delete(n),v},fe=gt(l,"DataView"),pe=Xt,ve=gt(l,"Promise"),he=gt(l,"Set"),de=gt(l,"WeakMap"),ye=O,ge=ot,be="[object Map]",me="[object Promise]",_e="[object Set]",je="[object WeakMap]",Oe="[object DataView]",we=ge(fe),Pe=ge(pe),Ae=ge(ve),Se=ge(he),Ne=ge(de),Te=ye;(fe&&Te(new fe(new ArrayBuffer(1)))!=Oe||pe&&Te(new pe)!=be||ve&&Te(ve.resolve())!=me||he&&Te(new he)!=_e||de&&Te(new de)!=je)&&(Te=function(t){var n=ye(t),r="[object Object]"==n?t.constructor:void 0,e=r?ge(r):"";if(e)switch(e){case we:return Oe;case Pe:return be;case Ae:return me;case Se:return _e;case Ne:return je}return n});var xe=Kn,ze=er,ke=pr,Ee=le,$e=Te,qe=$,Fe=Or,De=Ir,Ie="[object Arguments]",Ge="[object Array]",Me="[object Object]",Ve=Object.prototype.hasOwnProperty;var Be=function(t,n,r,e,o,a){var i=qe(t),u=qe(n),c=i?Ge:$e(t),s=u?Ge:$e(n),l=(c=c==Ie?Me:c)==Me,f=(s=s==Ie?Me:s)==Me,p=c==s;if(p&&Fe(t)){if(!Fe(n))return!1;i=!0,l=!1}if(p&&!l)return a||(a=new xe),i||De(t)?ze(t,n,r,e,o,a):ke(t,n,c,r,e,o,a);if(!(1&r)){var v=l&&Ve.call(t,"__wrapped__"),h=f&&Ve.call(n,"__wrapped__");if(v||h){var d=v?t.value():t,y=h?n.value():n;return a||(a=new xe),o(d,y,r,e,a)}}return!!p&&(a||(a=new xe),Ee(t,n,r,e,o,a))},Le=w;var Ue=function t(n,r,e,o,a){return n===r||(null==n||null==r||!Le(n)&&!Le(r)?n!=n&&r!=r:Be(n,r,e,o,t,a))},Ce=Kn,Re=Ue;var Je=K;var We=function(t){return t==t&&!Je(t)},He=We,Ke=oe;var Qe=function(t,n){return function(r){return null!=r&&(r[t]===n&&(void 0!==n||t in Object(r)))}},Xe=function(t,n,r,e){var o=r.length,a=o,i=!e;if(null==t)return!a;for(t=Object(t);o--;){var u=r[o];if(i&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<a;){var c=(u=r[o])[0],s=t[c],l=u[1];if(i&&u[2]){if(void 0===s&&!(c in t))return!1}else{var f=new Ce;if(e)var p=e(s,l,c,t,n,f);if(!(void 0===p?Re(l,s,3,e,f):p))return!1}}return!0},Ye=function(t){for(var n=Ke(t),r=n.length;r--;){var e=n[r],o=t[e];n[r]=[e,o,He(o)]}return n},Ze=Qe;var to=In;var no=En,ro=E,eo=$,oo=Ar,ao=Sr,io=qn;var uo=function(t,n){return null!=t&&n in Object(t)},co=function(t,n,r){for(var e=-1,o=(n=no(n,t)).length,a=!1;++e<o;){var i=io(n[e]);if(!(a=null!=t&&r(t,i)))break;t=t[i]}return a||++e!=o?a:!!(o=null==t?0:t.length)&&ao(o)&&oo(i,o)&&(eo(t)||ro(t))};var so=Ue,lo=function(t,n,r){var e=null==t?void 0:to(t,n);return void 0===e?r:e},fo=function(t,n){return null!=t&&co(t,n,uo)},po=H,vo=We,ho=Qe,yo=qn;var go=function(t){return t};var bo=In;var mo=function(t){return function(n){return null==n?void 0:n[t]}},_o=function(t){return function(n){return bo(n,t)}},jo=H,Oo=qn;var wo=function(t){var n=Ye(t);return 1==n.length&&n[0][2]?Ze(n[0][0],n[0][1]):function(r){return r===t||Xe(r,t,n)}},Po=function(t,n){return po(t)&&vo(n)?ho(yo(t),n):function(r){var e=lo(r,t);return void 0===e&&e===n?fo(r,t):so(n,e,3)}},Ao=go,So=$,No=function(t){return jo(t)?mo(Oo(t)):_o(t)};var To=function(t){return"function"==typeof t?t:null==t?Ao:"object"==typeof t?So(t)?Po(t[0],t[1]):wo(t):No(t)};var xo=function(t){return function(n,r,e){for(var o=-1,a=Object(n),i=e(n),u=i.length;u--;){var c=i[t?u:++o];if(!1===r(a[c],c,a))break}return n}}(),zo=oe;var ko=te;var Eo=function(t,n){return function(r,e){if(null==r)return r;if(!ko(r))return t(r,e);for(var o=r.length,a=n?o:-1,i=Object(r);(n?a--:++a<o)&&!1!==e(i[a],a,i););return r}}((function(t,n){return t&&xo(t,n,zo)})),$o=Eo,qo=te;var Fo=function(t,n){var r=-1,e=qo(t)?Array(t.length):[];return $o(t,(function(t,o,a){e[++r]=n(t,o,a)})),e};var Do=U;var Io=function(t,n){if(t!==n){var r=void 0!==t,e=null===t,o=t==t,a=Do(t),i=void 0!==n,u=null===n,c=n==n,s=Do(n);if(!u&&!s&&!a&&t>n||a&&i&&c&&!u&&!s||e&&i&&c||!r&&c||!o)return 1;if(!e&&!a&&!s&&t<n||s&&r&&o&&!e&&!a||u&&r&&o||!i&&o||!c)return-1}return 0};var Go=V,Mo=In,Vo=To,Bo=Fo,Lo=function(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t},Uo=Er,Co=function(t,n,r){for(var e=-1,o=t.criteria,a=n.criteria,i=o.length,u=r.length;++e<i;){var c=Io(o[e],a[e]);if(c)return e>=u?c:c*("desc"==r[e]?-1:1)}return t.index-n.index},Ro=go,Jo=$;var Wo=function(t,n,r){n=n.length?Go(n,(function(t){return Jo(t)?function(n){return Mo(n,1===t.length?t[0]:t)}:t})):[Ro];var e=-1;n=Go(n,Uo(Vo));var o=Bo(t,(function(t,r,o){return{criteria:Go(n,(function(n){return n(t)})),index:++e,value:t}}));return Lo(o,(function(t,n){return Co(t,n,r)}))};var Ho=function(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)},Ko=Math.max;var Qo=function(t,n,r){return n=Ko(void 0===n?t.length-1:n,0),function(){for(var e=arguments,o=-1,a=Ko(e.length-n,0),i=Array(a);++o<a;)i[o]=e[n+o];o=-1;for(var u=Array(n+1);++o<n;)u[o]=e[o];return u[n]=r(i),Ho(t,this,u)}};var Xo=function(t){return function(){return t}},Yo=gt,Zo=function(){try{var t=Yo(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),ta=Xo,na=Zo,ra=na?function(t,n){return na(t,"toString",{configurable:!0,enumerable:!1,value:ta(n),writable:!0})}:go,ea=Date.now;var oa=function(t){var n=0,r=0;return function(){var e=ea(),o=16-(e-r);if(r=e,o>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(void 0,arguments)}},aa=oa(ra),ia=go,ua=Qo,ca=aa;var sa=Dt,la=te,fa=Ar,pa=K;var va=M,ha=Wo,da=function(t,n,r){if(!pa(r))return!1;var e=typeof n;return!!("number"==e?la(r)&&fa(n,r.length):"string"==e&&n in r)&&sa(r[n],t)},ya=function(t,n){return ca(ua(t,n,ia),t+"")}((function(t,n){if(null==t)return[];var r=n.length;return r>1&&da(t,n[0],n[1])?n=[]:r>2&&da(n[0],n[1],n[2])&&(n=[n[0]]),ha(t,va(n,1),[])}));var ga=V,ba=To,ma=Fo,_a=$;var ja=function(t,n){return(_a(t)?ga:ma)(t,ba(n))},Oa=Array.prototype.join;var wa=function(t,n){return null==t?"":Oa.call(t,n)};function Pa(t){return"[object String]"===Object.prototype.toString.call(t)}function Aa(t){return!(!Pa(t)||""===t)}function Sa(t,n,r){if(!Aa(t))return"";if(!Aa(n))return"";if(!Pa(r))return"";let e=new RegExp(n,"g");return String(t).replace(e,r)}let Na="\n'get': {\n    'tags': [\n        '{tag}'\n    ],\n    'summary': 'select {tag} by {col}',\n    'description': 'select {tag} by {col}',\n    'parameters': [\n        {\n            'in': 'query',\n            'name': 'token',\n            'type': 'string',\n            'default': '{token}'\n        },\n        {\n            'name': '{col}',\n            'in': 'path',\n            'description': '{colDescription}',\n            'required': true,\n            'type': '{colType}',\n        }\n    ],\n    'responses': {\n        '200': {\n            'description': 'success'\n        },\n        'default': {\n            'description': 'error'\n        }\n    }\n},\n",Ta="\n'post': {\n    'tags': [\n        '{tag}'\n    ],\n    'summary': 'add or modify {tag} by {col}',\n    'description': 'add or modify {tag} by {col}',\n    'consumes': [\n        'application/json',\n    ],\n    'parameters': [\n        {\n            'in': 'query',\n            'name': 'token',\n            'type': 'string',\n            'default': '{token}'\n        },\n        {\n            'name': '{col}',\n            'in': 'path',\n            'description': '{colDescription}',\n            'required': true,\n            'type': '{colType}',\n        },\n        {\n            'name': 'body',\n            'in': 'body',\n            'description': '{tag} object in JSON string format',\n            'required': true,\n            'schema': {\n                'type': 'string',\n                'properties': {props}\n            }\n        }\n    ],\n    'responses': {\n        '200': {\n            'description': 'success'\n        },\n        'default': {\n            'description': 'error'\n        }\n    }\n},\n",xa=Ta.replace("'post':","'put':"),za="\n'delete': {\n    'tags': [\n        '{tag}'\n    ],\n    'summary': 'delete {tag} by {col}',\n    'description': 'delete {tag} by {col}',\n    'parameters': [\n        {\n            'in': 'query',\n            'name': 'token',\n            'type': 'string',\n            'default': '{token}'\n        },\n        {\n            'name': '{col}',\n            'in': 'path',\n            'description': '{colDescription}',\n            'required': true,\n            'type': '{colType}',\n        }\n    ],\n    'responses': {\n        '200': {\n            'description': 'success'\n        },\n        'default': {\n            'description': 'error'\n        }\n    }\n},\n",ka="\n'get': {\n    'tags': [\n        '{tag}'\n    ],\n    'summary': 'select all {tag}(s)',\n    'description': 'select all {tag}(s)',\n    'parameters': [\n        {\n            'in': 'query',\n            'name': 'token',\n            'type': 'string',\n            'default': '{token}'\n        }\n    ],\n    'security': [],\n    'responses': {\n        '200': {\n            'description': 'success'\n        },\n        'default': {\n            'description': 'error'\n        }\n    }\n},\n",Ea="\n'post': {\n    'tags': [\n        '{tag}'\n    ],\n    'summary': 'add or modify one or multiple {tag}(s)',\n    'description': 'add or modify one or multiple {tag}(s)',\n    'consumes': [\n        'application/json',\n    ],\n    'parameters': [\n        {\n            'in': 'query',\n            'name': 'token',\n            'type': 'string',\n            'default': '{token}'\n        },\n        {\n            'name': 'body',\n            'in': 'body',\n            'description': '{tag} object or array of objects in JSON string format',\n            'required': true,\n            'schema': {\n                'type': 'string',\n                'properties': {props}\n            }\n        }\n    ],\n    'responses': {\n        '200': {\n            'description': 'success'\n        },\n        'default': {\n            'description': 'error'\n        }\n    }\n},\n",$a=Ea.replace("'post':","'put':"),qa="\n'/{tag}': {\n    {itemsGet}\n    {itemsPost}\n    {itemsPut}\n},\n",Fa="\n'/{tag}/{col}/{{col}}': {\n    {itemGet}\n    {itemPost}\n    {itemPut}\n    {itemDelete}\n},\n",Da="\n{\n    'swagger': '2.0',\n    'info': {\n        'description': 'Server API(s) is generated by hapi.',\n        'version': '1.0.0',\n        'title': 'API Documents'\n    },\n    'host': '{host}',\n    'basePath': '/{basePath}',\n    'schemes': [\n        'http'\n    ],\n    'paths': {\n        {paths}\n    },\n}\n";function Ia(t){let n=ja(t,((t,n)=>function(t,n,r){let e=Fa;return e=Sa(e,"{itemGet}",Na),e=Sa(e,"{itemPost}",Ta),e=Sa(e,"{itemPut}",xa),e=Sa(e,"{itemDelete}",za),e=Sa(e,"{col}",t),e=Sa(e,"{colDescription}",n),e=Sa(e,"{colType}",r),e}(n,t.description,t.type)));return wa(n,"")}function Ga(t,n){let r="";return r+=function(){let t=qa;return t=Sa(t,"{itemsGet}",ka),t=Sa(t,"{itemsPost}",Ea),t=Sa(t,"{itemsPut}",$a),t}(),r+=Ia(n),r=Sa(r,"{tag}",t),r=Sa(r,"{props}",JSON.stringify(n)),r}function Ma(t,n,r,o){let a=function(t){let n=ja(t,(t=>Ga(t.apiName,t.props)));return wa(n,"")}(r),i=Da;return i=Sa(i,"{host}",t),i=Sa(i,"{basePath}",n),i=Sa(i,"{paths}",a),i=Sa(i,"{token}",o),e.parse(i)}var Va={};var Ba=go;var La=function(t,n){for(var r=-1,e=null==t?0:t.length;++r<e&&!1!==n(t[r],r,t););return t},Ua=Eo,Ca=function(t){return"function"==typeof t?t:Ba},Ra=$;var Ja=function(t,n){return(Ra(t)?La:Ua)(t,Ca(n))};!function(t){t.exports=Ja}({get exports(){return Va},set exports(t){Va=t}});var Wa=a(Va);function Ha(){let t,n,r=new Promise((function(){t=arguments[0],n=arguments[1]}));return r.resolve=t,r.reject=n,r}function Ka(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{},e=[],o="/";return Pa(n)&&(o=`/${n}/`),Wa(t,(t=>{let n;n={path:o+t.apiName,method:"GET",handler:function(n,e){let o=Ha();return r({method:"GET",apiName:t.apiName,propName:null,propValue:null,payload:null,req:n,res:e,pm:o}),o}},e.push(n),Wa(t.props,((a,i)=>{n={path:o+t.apiName+`/${i}/{${i}}`,method:"GET",handler:function(n,e){let o=Ha(),a=n.params;return r({method:"GET",apiName:t.apiName,propName:i,propValue:a[i],payload:null,req:n,res:e,pm:o}),o}},e.push(n)})),Wa(["POST","PUT"],(a=>{n={path:o+t.apiName,method:a,handler:function(n,e){let o=Ha(),i=n.payload;return r({method:a,apiName:t.apiName,propName:null,propValue:null,payload:i,req:n,res:e,pm:o}),o}},e.push(n),Wa(t.props,((i,u)=>{n={path:o+t.apiName+`/${u}/{${u}}`,method:a,handler:function(n,e){let o=Ha(),i=n.params,c=n.payload;return r({method:a,apiName:t.apiName,propName:u,propValue:i[u],payload:c,req:n,res:e,pm:o}),o}},e.push(n)}))})),Wa(t.props,((a,i)=>{n={path:o+t.apiName+`/${i}/{${i}}`,method:"DELETE",handler:function(n,e){let o=Ha(),a=n.params;return r({method:"DELETE",apiName:t.apiName,propName:i,propValue:a[i],payload:null,req:n,res:e,pm:o}),o}},e.push(n)}))})),e}return function(e){e.port||(e.port=8080),e.docFolder||(e.docFolder="swdoc"),e.apiParent||(e.apiParent="api"),e.routes||(e.routes=[]),function(t){let n=Object.prototype.toString.call(t);return"[object Function]"===n||"[object AsyncFunction]"===n}(e.proc)||(e.proc=()=>{});let o={method:"GET",path:`/${e.docFolder}/{file*}`,handler:{directory:{path:`${e.docFolder}/`}}},a=[];a.push(o),e.routes=ya(e.routes,"apiName"),a=[...a,...Ka(e.routes,e.apiParent,e.proc)];let i=function(){return Ma(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"localhost:8080",arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api",arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:"")}(`localhost:${e.port}`,e.apiParent,e.routes,e.token);t.writeFileSync(`./${e.docFolder}/swagger.json`,JSON.stringify(i,null,4),"utf8"),e.serverHapi?e.serverHapi.route(a):async function(){let t=n.server({port:e.port,routes:{cors:!0}});await t.register(r),t.route(a),t.start(),console.log(`Server running at: ${t.info.uri}`),console.log(`Server for API Documents running at: ${t.info.uri}/${e.docFolder}/index.html`)}()}}));
//# sourceMappingURL=w-restapi.umd.js.map
